var addSatu=!1,id_formula_sirup_add="",gen_presc_index=0,gen_presc_json="",total_afi_count=0,temp_sop_terapi=[],length_sop_terapi="",i_sop_terapi=0;if($("#LinkButton2").on("click",(function(){validasiKeterangan()})),$("#myModal").on("show.bs.modal",(function(){$("#generik_list_alergi").val(""),$("#generik_list_alergi").selectpicker("refresh"),generik_list_change()})),""==$("#terapi").val()||"[]"==$("#terapi").val())var data=[];else{data=JSON.parse($("#terapi").val());viewResep(resepJson($("#terapi").val())[1])}if(""==$("#tindakan").val()||"[]"==$("#tindakan").val())var dataTindakan=[];else viewTindakan(dataTindakan=JSON.parse($("#tindakan").val()));function afiCount(){$(".afi_count").each((function(a,t){var e=$(this).val();console.log("count before = "+e),""==(e=(e=e.replace(",",".")).replace(" ",""))&&(e=0),total_afi_count+=parseFloat(e)})),$("#total_afi").val(total_afi_count+" cm"),hasil(),total_afi_count=0}function getDiagnosaByICD(a){$.ajax({url:base+"/poli/ajax/diag",type:"GET",data:{icd10:a}}).done((function(a){a=JSON.parse(a);for(var t="",e=0;e<a.length;e++)t+='<tr class="anchor2">',t+="<td>"+a[e].id+"</td>",t+="<td>"+a[e].diagnosa+"</td>",t+="</tr>";$("#ajax4").html(t),$("#tambahDiagnosa").val("").focus()})).fail((function(){alert("Error!")}))}function insertDiagnosa(){var a=$("#lblICD").html(),t=$("#tambahDiagnosa").val();$.ajax({url:base+"/poli/ajax/indiag",type:"POST",data:{icd10:a,diagnosa:t,_token:$("#token").val()}}).done((function(e){if("0"==(e=$.trim(e)))Swal.fire({icon:"error",title:"Oops...",text:t+" GAGAL diinput"});else if("01"==e)validasi("#tambahDiagnosa","Sudah ada!!");else{e=JSON.parse(e),Swal.fire({icon:"success",title:"Good Job!",text:t+" berhasil diinput"}),getDiagnosaByICD(a);var i='<option value="'+e.id+'">'+e.diagnosa+" - "+e.diagnosaICD+"</option>";$("#ddlDiagnosa").append(i).selectpicker("refresh")}})).fail((function(){alert("Error!")}))}function confirmICD(){var a=$("table#GridView4 tbody tr").filter((function(){return"rgb(51, 122, 183)"==$(this).css("background-color")})).find("td:first-child").html(),t=$("table#GridView4 tbody tr").filter((function(){return"rgb(51, 122, 183)"==$(this).css("background-color")})).find("td:nth-child(2)").html();$("#lblICD").html(a),$("#lblDiagnosaICD").html(t),getDiagnosaByICD(a),$("#showModal2").click(),$("#hideModal1").click()}function confirmDiagnosa(){var a=$("table#GridView2 tbody tr").filter((function(){return"rgb(51, 122, 183)"==$(this).css("background-color")})).find("td:first-child").html();$("#ddlDiagnosa").val(a).selectpicker("refresh"),$("#diagnosa").val(a),$("#hideModal2").click(),$("#keterangan_diagnosa").focus()}function table_ICD(){$.post(base+"/poli/ajax/pilih",{byICD:$("#byICD").val(),byDiagnosa:$("#byDiagnosa").val(),_token:$("#token").val()},(function(a){for(var t="",e=0;e<a.length;e++)t+='<tr class="anchor2">',t+="<td>"+a[e].id+"</td>",t+="<td>"+a[e].diagnosaICD+"</td>",t+="</tr>";$("#temp").html(t)}))}function insertTerapi(){var a,t=$("#ddlNamaObat option:selected").text(),e=$("#txtjumlah").val(),i=$("#ddlsigna").val(),n=$("#ddlAturanMinum").val(),l=/syrup/.test(t);if(void 0!==(a=$("#ddlNamaObat").attr("disabled"))&&!1!==a&&$("#ddlNamaObat").removeAttr("disabled").selectpicker("refresh"),void 0!==(a=$("#tipeResep").attr("disabled"))&&!1!==a&&$("#tipeResep").removeAttr("disabled").selectpicker("refresh"),""==$("#ddlNamaObat").val()||""==e||""==i||""==n)""==$("#ddlNamaObat").val()&&validasi("#ddlNamaObat","Harus Diisi!"),""==$("#txtjumlah").val()&&validasi("#txtjumlah","Harus Diisi!"),""==$("#ddlsigna").val()&&validasi2("#ddlsigna","Harus Diisi!"),""==$("#ddlAturanMinum").val()&&validasi2("#ddlAturanMinum","Harus Diisi!");else if(l&&e>1){confirm("Anda akan menginput SIRUP DALAM JUMLAH BANYAK, hal ini tidak lazim dan bisa merupakan suatu kesalahan. Lanjutkan?")&&insert()}else if(e>20){confirm("Jumlah nya bisa jadi terlalu banyak. Lanjutkan?")&&insert()}else{var r=getIdFormula(),d="",s=!1;if(data.length>0)for(var o=0;o<data.length;o++)if(data[o].formula_id==r){s=!0,d=data[o].merek;break}if(s)confirm("Formula yang sama sudah dimasukkan dengan Nama = "+d+", Lanjutkan?")&&insert();else insert()}}function formSigna(){return $.ajax({url:"ajaxSigna.php",type:"POST",data:{_token:$("#token").val()}}).done((function(a){a=$.trim(a),$("#ajax6").html(a)})).fail((function(){console.log("error")})).complete((function(){$("#GridView4").dataTable({responsive:!0}),$("#inputSigna").val(""),$("#modalSigna input.input-sm").keypress((function(a){13==(a.keyCode||a.which)&&(insertSigna(),console.log("enter"))}))})),!1}$("#dummy_submit_perujuk_baru").click((function(){var a=$("#nama_perujuk").val(),t=$("#alamat_perujuk").val(),e=$("#no_telp_perujuk").val();""==a||""==t||""==e?(""==a&&validasi("#nama_perujuk","harus diisi!!"),""==t&&validasi("#alamat_perujuk","harus diisi!!"),""==e&&validasi("#no_telp_perujuk","harus diisi!!")):$("#submit_perujuk_baru").click()})),$("#submit_perujuk_baru").click((function(){var a=$("#nama_perujuk").val(),t=$("#alamat_perujuk").val(),e=$("#no_telp_perujuk").val();$.post(base+"/perujuks/ajax/create",{nama:a,alamat:t,no_telp:e},(function(t){"1"==t.result?($("#perujuk_id").html(t.options).val(t.value).selectpicker("refresh"),Swal.fire("Good job!","perujuk baru bernama "+a+" telah berhasil ditambahkan","success"),$("#modal_buat_perujuk_baru").modal("hide")):(Swal.fire({icon:"error",title:"Oops...",text:"maaf !! perujuk telah gagal ditambahkan"}),$("#modal_buat_perujuk_baru").modal("hide"))}))})),jQuery(document).ready((function(a){refresh(),"0"==a("#notified").val()&&"32"==a("#asuransi_id").val()&&Swal.fire({icon:"error",title:"Oops...",text:"Harap baca dengan Jelas aturan mengenai asuransi ini, ada satu / beberapa hal yang sudah ditambahkan. Terima kasih"}),a("#modal_buat_perujuk_baru").on("shown.bs.modal",(function(){a("#nama_perujuk").focus()})),a("#modal_buat_perujuk_baru").on("hidden.bs.modal",(function(){a("#perujuk_id").closest("div").find(".btn-white").focus()})),bahanHabisPakai(),""!=a("#resepluar").val()&&a("#panel-resepluar").show(),a("#cekFoto").modal({backdrop:"static",keyboard:!1}),uk_exec("uk","hpht"),""==a("#kesimpulan").val()&&hasil(),riwObsG(),a(".hasil").on("keyup change",(function(a){hasil()})),a("#G").keyup((function(a){riwObsG()})),view(),uk("umur_kehamilan","HPHT"),uk("uk","hpht"),a("#tab-status").on("shown.bs.tab",(function(t){a("#anamnesa").focus()})),a("#usg_presentasi").blur((function(t){a(this).val().indexOf("kepala")>-1?a(".presentasi").val("2"):a(this).val().indexOf("lintang")>-1?a(".presentasi").val("3"):a(this).val().indexOf("bokong")>-1&&a(".presentasi").val("4")})),a("#usg_djj").blur((function(t){a("#djj").val(a(this).val())})),a("#tab-usg").on("shown.bs.tab",(function(t){a("#usg_presentasi").focus()})),a("#tab-resep").on("shown.bs.tab",(function(t){namaObatFocus();var e=a("#anamnesa").val(),i=a("#pemeriksaan_fisik").val();if(""!=e||""!=i){var n='<div class="alert alert-warning">';n+=e+" | "+i,n+="</div>"}a("#resume").html(n)})),a("#keterangan_diagnosa").keydown((function(t){if(9==(t.keyCode||t.which))return a("#tab-resep").tab("show"),!1})),a("#modalTindakan").on("shown.bs.modal",(function(){a("#selectTindakan").closest("td").find(".btn-white").focus()})),a("#btn_auto").click((function(t){if(""==a("#bb_input").val())var e="55";else e=a("#bb_input").val();a("#bb_aktif").val(e);var i=a("#bb_aktif").val();a("#berat_badan").val(i),a.get(base+"/DdlMerek/alloption2",{bb:i},(function(t){var e=(t=a.parseJSON(t)).berat_badan;t=t.temp,customOption2a(t=JSON.stringify(t),e)}))})),a("#btn_auto_off").click((function(a){optionSemua(getIdMerek())})),a("#inputSigna").keyup((function(t){var e=t.keyCode||t.which;13==e&&38==e&&40==e&&9==e||a.post(base+"/poli/ajax/selectsigna",{signa:a(this).val(),_token:a("#token").val()},(function(t){for(var e="",i=(t=JSON.parse(t)).length-1;i>=0;i--)e+="<tr>",e+="<td>"+t[i].id+"</td>",e+="<td>"+t[i].signa+"</td>",e+='<td><button type="button" class="btn btn-success btn-xs" value="'+t[i].id+'" onclick="pilihSigna(this)">pilih</button></td>',e+="</tr>";0==t.length&&(e='<tr><td colspan="3" class="text-center">Data tidak ditemukan</td></tr>'),a("#tblSigna tbody").html(e)}))})),a("#inputAturanMinum").keyup((function(t){var e=t.keyCode||t.which;13==e&&38==e&&40==e&&9==e||a.post(base+"/poli/ajax/selectatur",{aturan:a(this).val()},(function(t){for(var e="",i=(t=JSON.parse(t)).length-1;i>=0;i--)e+="<tr>",e+="<td>"+t[i].id+"</td>",e+="<td>"+t[i].aturan_minum+"</td>",e+='<td><button type="button" class="btn btn-success  btn-xs" value="'+t[i].id+'" onclick="pilihAturanMinum(this)">pilih</button></td>',e+="</tr>";0==t.length&&(e='<tr><td colspan="3" class="text-center">Data tidak ditemukan</td></tr>'),a("#tblAturanMinum tbody").html(e)}))})),a(".search").keyup((function(a){var t=a.keyCode||a.which;38!=t&&40!=t&&13!=t&&table_ICD()})),a(".search").on("keypress",(function(t){var e=a("table#GridView4 tbody tr").filter((function(){return"rgb(51, 122, 183)"==a(this).css("background-color")})).index(),i=t.keyCode||t.which;if(13==i&&-1!=e)confirmICD();else if(40==i&&-1==e)a("table#GridView4 tbody tr:first-child").toggleClass("rowHighlight");else if(40==i&&-1!=e&&9!=e){e=a("table#GridView4 tbody tr").filter((function(){return"rgb(51, 122, 183)"==a(this).css("background-color")})).index();var n=parseInt(e)+1,l=parseInt(e)+2;a("table#GridView4 tbody tr:nth-child("+n+")").toggleClass("rowHighlight"),a("table#GridView4 tbody tr:nth-child("+l+")").toggleClass("rowHighlight")}else if(38==i&&-1!=e&&0!=e){e=a("table#GridView4 tbody tr").filter((function(){return"rgb(51, 122, 183)"==a(this).css("background-color")})).index(),n=parseInt(e)+1,l=e;a("table#GridView4 tbody tr:nth-child("+n+")").toggleClass("rowHighlight"),a("table#GridView4 tbody tr:nth-child("+l+")").toggleClass("rowHighlight")}})),a("#tambahDiagnosa").on("keypress",(function(t){var e=a("table#GridView2 tbody tr").filter((function(){return"rgb(51, 122, 183)"==a(this).css("background-color")})).index(),i=a(this),n=parseInt(a("table#GridView2 tbody tr:last").index()),l=t.keyCode||t.which;if(13==l&&-1==e&&""!=i.val())insertDiagnosa();else{if(13==l&&-1==e&&""==i.val())return Swal.fire({icon:"error",title:"Oops...",text:"Untuk masukkan diagnosa input harus diisi"}),i.focus(),!1;if(13==l&&-1!=e)confirmDiagnosa();else if(40==l&&-1==e)a("table#GridView2 tbody tr:first-child").toggleClass("rowHighlight"),a("#tambahDiagnosa").val("");else if(40==l&&e!=n){var r=parseInt(e)+1,d=parseInt(e)+2;a("table#GridView2 tbody tr:nth-child("+r+")").toggleClass("rowHighlight"),a("table#GridView2 tbody tr:nth-child("+d+")").toggleClass("rowHighlight"),a("#tambahDiagnosa").val("")}else{if(40==l&&e==n)return!1;if(38==l&&-1!=e&&0!=e){e=a("table#GridView2 tbody tr").filter((function(){return"rgb(51, 122, 183)"==a(this).css("background-color")})).index(),r=parseInt(e)+1,d=e;a("table#GridView2 tbody tr:nth-child("+r+")").toggleClass("rowHighlight"),a("table#GridView2 tbody tr:nth-child("+d+")").toggleClass("rowHighlight"),a("#tambahDiagnosa").val("")}else{if(38==l&&0==e)return!1;e=a("table#GridView2 tbody tr").filter((function(){return"rgb(51, 122, 183)"==a(this).css("background-color")})).index();var s=parseInt(e)+1;a("table#GridView2 tbody tr:nth-child("+s+")").toggleClass("rowHighlight")}}}})),a("#exampleModal").on("hidden.bs.modal",(function(){a("#byICD").val(""),a("#byDiagnosa").val("").focus(),table_ICD()})),a(document).on("click","table#GridView4 tbody tr",(function(t){a(".rowHighlight").toggleClass("rowHighlight"),a(this).toggleClass("rowHighlight"),a("#byDiagnosa").focus()})),a(document).on("click","table#GridView2 tbody tr",(function(t){a(".rowHighlight").toggleClass("rowHighlight"),a(this).toggleClass("rowHighlight"),a("#tambahDiagnosa").focus()})),a(document).on("click","#confirmICD",(function(t){-1!=a("table#GridView4 tbody tr").filter((function(){return"rgb(51, 122, 183)"==a(this).css("background-color")})).index()?confirmICD():Swal.fire({icon:"error",title:"Oops...",text:"pilih dulu ICD nya"})})),a("#exampleModal1").on("show.bs.modal",(function(){a("input#tambahDiagnosa").val("").keyup().focus()})),a("#inputTindakanSubmit").keypress((function(t){if(9==(t.keyCode||t.which))return a("#inputTindakanSubmit").click(),!1})),a("#modalTindakan").on("hidden.bs.modal",(function(){bahanHabisPakai()})),a("#modalSigna").on("hidden.bs.modal",(function(t){a("#ddlsigna").closest("div").find(".btn-white").focus()})),a("#modalAturanMinum").on("hidden.bs.modal",(function(t){a("#ddlAturanMinum").closest("div").find(".btn-white").focus()})),a("a#inputResep").keydown((function(t){a(this);var e=t.keyCode||t.which;if(9==e||13==e)return insertTerapi(),!1})),a("#tipeResep").change((function(){var t=a(this).val(),e=getIdMerek();"1"==t?hideTipeResepPuyer(e):"2"==t?hideTipeResepSirup(e):"0"==t&&(a("#ddlsigna").val("").selectpicker("refresh").closest(".input-group").fadeIn(500),a("#ddlAturanMinum").val("").selectpicker("refresh").closest(".input-group").fadeIn(500),a("#txtjumlah").val("").selectpicker("refresh").fadeIn(500),optionSemua(e))})),a("#ddlNamaObat").change((function(){if(""!=a(this).val);else;var t=a("#pasien_id").val();a.get(base+"/poli/ajax/alergi/prevent",{merek_id:a(this).val(),pasien_id:t},(function(t,e,i){if(a.trim(t)>0)return Swal.fire({icon:"error",title:"Oops...",text:"obat tidak bisa dipilih karena komposisi dari obat tersebut membuat pasien alergi"}),a("#ddlNamaObat").val("").selectpicker("refresh"),!1}));var e=JSON.parse(a(this).val()).merek_id,i=getSediaan(),n=getMerek(),l=getIdFormula(),r=getTidakDipuyer(),d=a("#tipeResep").val();if("syrup"==i&&2==d)return Swal.fire({icon:"error",title:"Oops...",text:"obat "+n+", tidak boleh dicampur dengan obat lain karena bukan dry syrup seperti \nAmoxilin Syr \nThiamphenicol syr \n Cefadroksil syr \n atau cefixim syr \nYang bisa dicampur dengan obat lain"}),a("#ddlNamaObat").val("").selectpicker("refresh"),namaObatFocus(),!1;if("1"==r&&(1==d||2==d))return Swal.fire({icon:"error",title:"Oops...",text:"obat "+n+", tidak boleh dipuyer ataupun dicampur ke dalam sirup"}),a("#ddlNamaObat").val("").selectpicker("refresh"),namaObatFocus(),!1;"1"!=a("#tipeResep").val()||"-1"!=e&&"-3"!=e?"2"==a("#tipeResep").val()&&"-2"==e&&(a("#txtjumlah").val("1").selectpicker("refresh").closest(".input-group").fadeOut(500),a("#ddlsigna").val("").selectpicker("refresh").closest(".input-group").fadeIn(500),a("#ddlAturanMinum").val("1").selectpicker("refresh").closest(".input-group").fadeIn(500),a("#tipeResep").val("0").selectpicker("refresh"),optionSemua(e),a("#selesaikanAdd").html()&&selesaiAdd(a("#selesaikanAdd"))):(a("#ddlsigna").val("").selectpicker("refresh").closest(".input-group").fadeIn(500),a("#ddlAturanMinum").val("1").selectpicker("refresh").closest(".input-group").fadeIn(500),a("#tipeResep").val("0").selectpicker("refresh"),optionSemua(e),a("#selesaikanPuyer").html()&&selesaiPuyer(a("#selesaikanPuyer")));var s=getAturanMinumId();if(console.log(s),a("#ddlAturanMinum").val(s).selectpicker("refresh"),""!=a("#bb_aktif").val()&&""!=a("#ddlNamaObat").val()){var o=a("#ddlNamaObat option:selected").attr("data-dose"),u=(o=a.parseJSON(o)).signa_id,p=o.jumlah;a("#txtjumlah").val(p),a("#ddlsigna").val(u).selectpicker("refresh")}if(""!=a(this).val()){var c=a("#ddlNamaObat option:selected").attr("data-peringatan"),m="";if("null"!=c){m=c;var g='<div class="panel panel-danger" id="isi_pesan"><div class="panel-heading"><h1 class="panel-title">'+(n=a("#ddlNamaObat option:selected").text())+'</h1></div><div class="panel-body">'+m+"</div></div>";a("#peringatan").html(g),a("#isi_pesan").hide().slideDown(500)}else a("#isi_pesan").slideUp(500,(function(){a(this).remove()}))}if("32"==a("#asuransi_id").val()&&""!=a(this).val()){var f=getIdRak(),h=a("#tipeResep").val(),b=(n=a("#ddlNamaObat option:selected").text(),a("#ddlNamaObat option:selected").attr("data-fornas"));if("D7"==f&&"1"==h);else if("0"==b){a("#isi_pesan_fornas").remove();var k='<div class="alert alert-danger" id="isi_pesan_fornas">'+n+" <strong>tidak ditanggung BPJS</strong></div>";a("#peringatan").prepend(k),a("#isi_pesan_fornas").hide().fadeIn(500)}else a("#isi_pesan_fornas").fadeOut(500,(function(){a(this).remove()}))}a.post(base+"/poli/ajax/ibusafe",{merek_id:a(this).val(),umur:a("#umur").html(),_token:a("#token").val()},(function(t){"1"==(t=a.trim(t))&&(Swal.fire({icon:"error",title:"Oops...",text:"Ibuprofen syrup / tablet tidak boleh digunakan untuk anak dibawah umur 1 tahun, gunakan ibuprofen suppositoria dalam kondisi darurat!! Optimalkan pemberian paracetamol 15 mg/kgbb tiap 4 jam, disertai dengan ibuprofen supp bila kepepet !!"}),a("#ddlNamaObat").val("").selectpicker("refresh"))})),"1"==a("#hamil").val()?a.post(base+"/poli/ajax/pregsafe",{merek_id:a(this).val()},(function(t){if(""!=(t=a.trim(t))){t=a.parseJSON(t);var e='<h4 class="text-center">Peringatan keamanan</h4>';e+='<h4 class="text-center">dalam kehamilan</h4>',e+='<table class="table table-condensed table-bordered font-kecil">',e+='<thead><tr><th class="bg-red">Generik</th><th class="bg-red">Safety Index</th></tr></thead>',e+="<tbody>";for(var i=0;i<t.length;i++)e+="<tr>",e+="<td>"+t[i].generik+" "+t[i].bobot+"</td>",e+="<td>"+t[i].pregnancy_safety_index+"</td>",e+="</tr>";e+="</tbody></table>",a("#legendpop").attr({title:a("#ddlNamaObat option:selected").text(),"data-original-title":a("#ddlNamaObat option:selected").text(),"data-content":e}),a("#legendpop").popover("show")}else a("#legendpop").popover("hide")})):"150805003"==a(this).val()?(a("#legendpop").attr({title:"Decafil tabet 150 mg","data-original-title":"Decafil tabet 150 mg","data-content":"Jika pasien sudah biasa/sering sesak nafas, decafil diberikan 20 tablet agar pasien tidak perlu bolak-balik ke klinik, termasuk dan terutama pasien BPJS"}),a("#legendpop").popover("show")):"150802046"==l&&"32"==a("#asuransi_id").val()?(a("#legendpop").attr({title:"Levofloxacine tabet 500 mg","data-original-title":"Levofloxacine tabet 500 mg","data-content":"Pada pasien BPJS dengan Typhoid fever, obat ini diberikan selama 6 hari, obat simtomatik lain diberikan selama 3 hari, diharapkan pasien tidak kontrol kalau keadaan membaik dan tinggal habiskan antibiotiknya saja"}),a("#legendpop").popover("show")):a("#legendpop").popover("hide")})),a('[data-toggle="popover"]').popover(),sesuaikanResep(),a("#pemeriksaan_penunjang").keypress((function(t){if(9!=(t.keyCode||t.which))return a("#modalTindakan").modal("show"),a(this).blur(),!1})),setTimeout((function(){a("#anamnesa").focus()}),500),a(".afi_count").keyup((function(a){afiCount()}))})),$("#inputAturanMinum").focus();var ID_SIGNA_BARU="";function insertSigna(){var a=$("#inputSigna").val();if(""!=a)return $.ajax({url:base+"/poli/ajax/insigna",type:"POST",data:{signa:a,_token:$("#token").val()}}).done((function(t){if(""!=(t=JSON.parse(t)).warning)validasi("#inputSigna",t.warning);else{var e='<option value="'+t.id+'">'+a+"</option>",i=t.temp;$("#ddlsigna").append(e).val(i.id).selectpicker("refresh");var n="";n+="<tr>",n+="<td>"+i.id+"</td>",n+="<td>"+i.signa+"</td>",n+='<td><button class="btn btn-success btn-xs" value="'+i.id+'" onclick="pilihSigna(this)">Pilih</button></td>',n+="</tr>",$("#tblSigna tbody").html(n).hide().fadeIn(300,(function(){$("#modalSigna").modal("hide")}))}})).fail((function(){console.log("error")})),!1;validasi("#inputSigna","Input Tidak Boleh Kosong"),$("#inputSigna").focus()}var ID_ATURAN_MINUM_BARU="";function insertAturanMinum(){var a=$("#inputAturanMinum").val();return""!=a?($.ajax({url:base+"/poli/ajax/inatur",type:"POST",data:{aturan:$("#inputAturanMinum").val(),_token:$("#token").val()}}).done((function(t){if(""!=(t=JSON.parse(t)).warning)validasi("#inputAturanMinum",t.warning);else{var e='<option value="'+t.id+'">'+a+"</option>",i=t.temp;$("#ddlAturanMinum").append(e).val(i.id).selectpicker("refresh");var n="";n+="<tr>",n+="<td>"+i.id+"</td>",n+="<td>"+i.aturan_minum+"</td>",n+='<td><button class="btn btn-success btn-xs" value="'+i.id+'" onclick="pilihAturanMinum(this)">Pilih</button></td>',n+="</tr>",$("#tblAturanMinum tbody").html(n).hide().fadeIn(300,(function(){$("#modalAturanMinum").modal("hide")}))}})).fail((function(){console.log("error")})),!1):(Swal.fire("Oops!","input tidak boleh kosong","error"),!1)}function ddlSigna(a){return $.ajax({url:"ddlSignaRuangPeriksa.php",type:"POST",data:{ID_SIGNA:a,_token:$("#token").val()}}).done((function(a){a=$.trim(a),$("#ddlsigna").html(a).selectpicker("refresh")})).fail((function(){console.log("error")})),!1}function selesaiPuyer(a){var t=$("#asuransi_id").val();return $("#tipeResep").val("0").selectpicker("refresh"),$(a).fadeOut("400",(function(){$("#tipeResep").closest("div").find(".btn-white").closest("div").fadeIn("400")})),"32"==t||"15"==t||"3"==t?$("#ddlNamaObat").val("-1").selectpicker("refresh").closest("div").fadeIn(400):$("#ddlNamaObat").val("-3").selectpicker("refresh").closest("div").fadeIn(400),$("#ddlNamaObat, #tipeResep").prop("disabled",!0).selectpicker("refresh"),$("#ddlsigna, #ddlAturanMinum").val("0").selectpicker("refresh"),$("#ddlsigna, #ddlAturanMinum").closest("div").fadeIn(400),$("#txtjumlah").focus(),!1}function selesaiAdd(a){$("#asuransi_id").val();return $("#tipeResep").val("0").selectpicker("refresh"),$(a).fadeOut("400",(function(){$("#tipeResep").closest("div").find(".btn-white").closest("div").fadeIn("400")})),$("#ddlNamaObat").val("-2").selectpicker("refresh").closest("div").fadeIn(400),$("#ddlNamaObat, #tipeResep").prop("disabled",!0).selectpicker("refresh"),$("#ddlsigna, #ddlAturanMinum").val("0").selectpicker("refresh"),$("#ddlsigna, #ddlAturanMinum").closest("div").fadeIn(400),addSatu?$("#txtjumlah").val("1").hide():$("#txtjumlah").val("0").hide(),$("#ddlsigna").closest("div").find(".btn-white").focus(),!1}function optionSyrup(a){$.ajax({url:base+"/DdlMerek/optionsyrup",type:"GET",data:{ID_MEREK:a,asuransi_id:$("#asuransi_id").val()}}).done((function(a){customOption(a)})).fail((function(){console.log("error")})).complete((function(){$("#ddlNamaObat").selectpicker("refresh")}))}function optionPuyer(a){$.ajax({url:base+"/DdlMerek/optionpuyer",type:"GET",data:{ID_MEREK:a,asuransi_id:$("#asuransi_id").val()}}).done((function(a){customOption(a)})).fail((function(){console.log("error")})).complete((function(){$("#ddlNamaObat").selectpicker("refresh")}))}function optionSemua(a){$.ajax({url:base+"/DdlMerek/alloption",type:"GET",data:{asuransi_id:$("#asuransi_id").val()}}).done((function(a){customOption(a)})).fail((function(){console.log("error")}))}function resetSignaAturanMinum(){$("#ddlsigna").val("").selectpicker("refresh"),$("#ddlAturanMinum").val("").selectpicker("refresh"),$("#txtjumlah").val("")}function resetAll(){resetSignaAturanMinum(),$("select.kosong").val("").selectpicker("refresh"),namaObatFocus(),console.log("1"),alert("reset all")}function pilihSigna(a){var t=$(a).val();$("#ddlsigna").val(t).selectpicker("refresh"),$("#hideModalSigna").click()}function pilihAturanMinum(a){var t=$(a).val();$("#ddlAturanMinum").val(t).selectpicker("refresh"),$("#hideModalAturanMinum").click()}function insert(){var a=getIdMerek(),t=getIdFormula(),e=getIdRak(),i=getFornas(),n=getHargaJual(),l=$("#tipeResep").val();"D7"==e&&"1"==l&&(i="1");var r=$("#ddlNamaObat option:selected").text(),d=$("#txtjumlah").val();$("#ddlsigna").val(),$("#ddlAturanMinum").val();$("#legendpop").popover("hide"),data[data.length]={jumlah:d,merek_id:a,rak_id:e,harga_jual_ini:n,formula_id:t,merek_obat:r,fornas:i,signa:$("#ddlsigna option:selected").text(),aturan_minum:$("#ddlAturanMinum option:selected").text()};var s=JSON.stringify(data);$("#terapi").val(s),sesuaikanInputResep(a),viewResep(resepJson(s)[1]),namaObatFocus(),$(".kosong").val(""),$("select.kosong").selectpicker("refresh"),$("#ddlsigna").val()>0&&(resetSignaAturanMinum(),alert("kosongkan"))}function customOption(a){var t=getIdMerek();a=JSON.parse(a);for(var e="",i=0;i<a.length;i++)if(a[i].merek_id==t){e+='<option data-custom-value=\'{ "formula_id" : "',e+=a[i].formula_id,e+='", "rak_id" : "',e+=a[i].rak_id,e+='", "merek_id" : "',e+=a[i].merek_id,e+='", "harga_beli" : "',e+=a[i].harga_beli,e+='" , "aturan_minum_id" : "',e+=a[i].aturan_minum_id,e+='" , "harga_jual" : "',e+=a[i].harga_jual,e+='" , "sediaan" : "',e+=a[i].sediaan,e+='" , "tidak_dipuyer" : "',e+=a[i].tidak_dipuyer,e+='" }\' selected="selected" data-subtext=\'';for(var n=0;n<a[i].komposisi.length;n++)e+="<br/>",e+=a[i].komposisi[n];e+="' value='",e+=a[i].merek_id,e+="' data-peringatan='",e+=a[i].peringatan,e+="' data-fornas='",e+=a[i].fornas,e+="' data-alternatif='",e+=a[i].alternatif,e+="'>",e+=a[i].merek,e+="</option>"}else{e+='<option data-custom-value=\'{ "formula_id" : "',e+=a[i].formula_id,e+='", "rak_id" : "',e+=a[i].rak_id,e+='", "merek_id" : "',e+=a[i].merek_id,e+='", "harga_beli" : "',e+=a[i].harga_beli,e+='" , "aturan_minum_id" : "',e+=a[i].aturan_minum_id,e+='" , "harga_jual" : "',e+=a[i].harga_jual,e+='" , "sediaan" : "',e+=a[i].sediaan,e+='" , "tidak_dipuyer" : "',e+=a[i].tidak_dipuyer,e+="\" }' data-subtext='";for(n=0;n<a[i].komposisi.length;n++)e+="<br/>",e+=a[i].komposisi[n];e+="' value='",e+=a[i].merek_id,e+="' data-peringatan='",e+=a[i].peringatan,e+="'  data-fornas='",e+=a[i].fornas,e+="' data-alternatif='",e+=a[i].alternatif,e+="'>",e+=a[i].merek,e+="</option>"}$("#ddlNamaObat").html(e).selectpicker("refresh"),$("#bb_aktif").val(""),$("#keterangan_auto_keterangan").hide(),$(".auto").show(500),$("#btn_auto_off").hide(500),namaObatFocus()}function customOption2(a,t){console.log("customOption2");var e=getIdMerek();a=JSON.parse(a);for(var i="",n=0;n<a.length;n++){var l=JSON.stringify(a[n].doses);if(a[n].merek_id==e){i+="<option data-dose='",i+=l,i+='\' data-custom-value=\'{ "formula_id" : "',i+=a[n].formula_id,i+='", "rak_id" : "',i+=a[n].rak_id,i+='", "merek_id" : "',i+=a[n].merek_id,i+='", "harga_beli" : "',i+=a[n].harga_beli,i+='" , "aturan_minum_id" : "',i+=a[n].aturan_minum_id,i+='" , "harga_jual" : "',i+=a[n].harga_jual,i+='" , "sediaan" : "',i+=a[n].sediaan,i+='" , "tidak_dipuyer" : "',i+=a[n].tidak_dipuyer,i+='" }\' selected="selected" data-subtext=\'';for(var r=0;r<a[n].komposisi.length;r++)r<1||(i+="////<br/>"),i+=a[n].komposisi[r];i+="' value='",i+=a[n].merek_id,i+="' data-peringatan='",i+=a[n].peringatan,i+="' data-fornas='",i+=a[n].fornas,i+="' data-alternatif='",i+=a[n].alternatif,i+="'>",i+=a[n].merek,i+="</option>"}else{i+="<option data-dose='",i+=l,i+='\' data-custom-value=\'{ "formula_id" : "',i+=a[n].formula_id,i+='", "rak_id" : "',i+=a[n].rak_id,i+='", "merek_id" : "',i+=a[n].merek_id,i+='", "harga_beli" : "',i+=a[n].harga_beli,i+='" , "aturan_minum_id" : "',i+=a[n].aturan_minum_id,i+='" , "harga_jual" : "',i+=a[n].harga_jual,i+='" , "sediaan" : "',i+=a[n].sediaan,i+='" , "tidak_dipuyer" : "',i+=a[n].tidak_dipuyer,i+="\" }' data-subtext='";for(r=0;r<a[n].komposisi.length;r++)i+="<br/>",i+=a[n].komposisi[r];i+="' value='",i+=a[n].merek_id,i+="' data-peringatan='",i+=a[n].peringatan,i+="' data-fornas='",i+=a[n].fornas,i+="' data-alternatif='",i+=a[n].alternatif,i+="'>",i+=a[n].merek,i+="</option>"}}$("#ddlNamaObat").html(i).selectpicker("refresh"),$("#keterangan_auto").html(t),$("#keterangan_auto_keterangan").removeClass("hide").hide().slideDown(500),$("#ddlNamaObat").val("").selectpicker("refresh"),$("#ddlAturanMinum").val("").selectpicker("refresh"),$("#ddlsigna").val("").selectpicker("refresh"),$("#txtjumlah").val(""),$(".auto").hide(500),$("#btn_auto_off").show(500),namaObatFocus()}function customOption2a(a,t){console.log("customOption2a");var e=getIdMerek();a=JSON.parse(a);for(var i="",n=0;n<a.length;n++){var l=JSON.stringify(a[n].doses);if(a[n].merek_id==e){i+="<option data-dose='",i+=l,i+='\' data-custom-value=\'{ "formula_id" : "',i+=a[n].formula_id,i+='", "rak_id" : "',i+=a[n].rak_id,i+='", "merek_id" : "',i+=a[n].merek_id,i+='", "harga_beli" : "',i+=a[n].harga_beli,i+='" , "aturan_minum_id" : "',i+=a[n].aturan_minum_id,i+='" , "harga_jual" : "',i+=a[n].harga_jual,i+='" , "sediaan" : "',i+=a[n].sediaan,i+='" , "tidak_dipuyer" : "',i+=a[n].tidak_dipuyer,i+='" }\' selected="selected" data-subtext=\'';for(var r=0;r<a[n].komposisi.length;r++)i+="<br/>",i+=a[n].komposisi[r];i+="' value='",i+=a[n].merek_id,i+="' data-peringatan='",i+="' value='",i+=a[n].merek_id,i+="' data-peringatan='",i+=a[n].peringatan,i+="' data-fornas='",i+=a[n].fornas,i+="' data-alternatif='",i+=a[n].alternatif,i+="'>",i+=a[n].merek,i+="</option>"}else{i+="<option data-dose='",i+=l,i+='\' data-custom-value=\'{ "formula_id" : "',i+=a[n].formula_id,i+='", "rak_id" : "',i+=a[n].rak_id,i+='", "merek_id" : "',i+=a[n].merek_id,i+='", "harga_beli" : "',i+=a[n].harga_beli,i+='" , "aturan_minum_id" : "',i+=a[n].aturan_minum_id,i+='" , "harga_jual" : "',i+=a[n].harga_jual,i+='" , "sediaan" : "',i+=a[n].sediaan,i+='" , "tidak_dipuyer" : "',i+=a[n].tidak_dipuyer,i+="\" }' data-subtext='";for(r=0;r<a[n].komposisi.length;r++)i+="<br/>",i+=a[n].komposisi[r];i+="' value='",i+=a[n].merek_id,i+="' data-peringatan='",i+=a[n].peringatan,i+="' data-fornas='",i+=a[n].fornas,i+="' data-alternatif='",i+=a[n].alternatif,i+="'>",i+=a[n].merek,i+="</option>"}}$("#ddlNamaObat").html(i).selectpicker("refresh"),$("#keterangan_auto").html(t),$("#keterangan_auto_keterangan").removeClass("hide").hide().slideDown(500),$("#ddlNamaObat").val("").selectpicker("refresh"),$("#ddlAturanMinum").val("").selectpicker("refresh"),$("#ddlsigna").val("").selectpicker("refresh"),$("#txtjumlah").val(""),$(".auto").hide(500),$("#btn_auto_off").show(500)}function getIdMerek(){var a=$("#ddlNamaObat").val();if(""!=a)var t=$("#ddlNamaObat option:selected").attr("data-custom-value"),e=(a=JSON.parse(t)).merek_id;else e="";return e}function getIdFormula(){var a=$("#ddlNamaObat").val();if(""!=a){var t=$("#ddlNamaObat option:selected").attr("data-custom-value");console.log("data_custom ==== "),console.log("data_custom ==== "),console.log("data_custom ==== "),console.log("data_custom ==== "),console.log("data_custom ==== "),console.log(t);var e=(a=JSON.parse(t)).formula_id}else e="";return e}function getIdRak(){var a=$("#ddlNamaObat").val();if(""!=a)var t=$("#ddlNamaObat option:selected").attr("data-custom-value"),e=(a=JSON.parse(t)).rak_id;else e="";return e}function getFornas(){if(""!=$("#ddlNamaObat").val())var a=$("#ddlNamaObat option:selected").attr("data-fornas");else a="";return a}function getHargaJual(){var a=$("#ddlNamaObat").val();if(""!=a){var t=$("#ddlNamaObat option:selected").attr("data-custom-value");a=JSON.parse(t);var e=$("#kali_obat").val();console.log("kali_obat = "+e);var i=a.harga_jual*parseInt(e)}else i="";return i}function getAturanMinumId(){var a=$("#ddlNamaObat").val();if(""!=a)var t=$("#ddlNamaObat option:selected").attr("data-custom-value"),e=(a=JSON.parse(t)).aturan_minum_id;else e="";return e}function getMerek(){if(""!=$("#ddlNamaObat").val())var a=$("#ddlNamaObat option:selected").text();else a="";return a}function getSediaan(){var a=$("#ddlNamaObat").val();if(""!=a)var t=$("#ddlNamaObat option:selected").attr("data-custom-value"),e=(a=JSON.parse(t)).sediaan;else e="";return e}function getTidakDipuyer(){var a=$("#ddlNamaObat").val();if(""!=a)var t=$("#ddlNamaObat option:selected").attr("data-custom-value"),e=(a=JSON.parse(t)).tidak_dipuyer;else e="";return e}function rowdel(a){var t=JSON.parse($(a).val());$("#legendpop").popover("hide"),data.splice(t[0].id,t.length);var e=JSON.stringify(data);$("#terapi").val(e),viewResep(resepJson(e)[1]),"0"==$("#puyer").val()&&"0"==$("#boolAdd").val()&&$("#boolSirupPuyer").val("0");var i="";data.length>0&&(i=data[data.length-1].signa),"Puyer"==i&&"0"==$("#boolSirupPuyer").val()?($("#tipeResep").val("1"),hideTipeResepPuyer(null),tipePuyer()):"Add"==i&&"0"==$("#boolSirupPuyer").val()?($("#tipeResep").val("2"),hideTipeResepSirup2(null),tipeSirup()):"0"==$("#boolSirupPuyer").val()&&($("#tipeResep").closest("div").find(".btn-info").fadeOut("500",(function(){$(this).remove()})),$("#tipeResep").closest("div").find(".btn-primary").fadeOut("500",(function(){$(this).remove()})),$("#ddlsigna").val("").selectpicker("refresh").closest(".input-group").fadeIn(500),$("#tipeResep").val("0").selectpicker("refresh").closest("div").find(".btn-white").closest("div").fadeIn(500),$("#ddlAturanMinum").val("").selectpicker("refresh").closest(".input-group").fadeIn(500),$("#txtjumlah").val("").selectpicker("refresh").fadeIn(500),optionSemua(null),$("#boolSirupPuyer").val("0"))}function sesuaikanInputResep(a){"0"==$("#tipeResep").val()&&"Add Sirup"==$("#ddlNamaObat option:selected").text()&&($("#txtjumlah").val("").fadeIn(500),optionSemua(a)),"1"==$("#tipeResep").val()&&"0"==$("#boolSirupPuyer").val()?tipePuyer():"2"==$("#tipeResep").val()&&"0"==$("#boolSirupPuyer").val()?tipeSirup():"0"==$("#tipeResep").val()&&"1"==$("#boolSirupPuyer").val()?($("#boolSirupPuyer").val("0"),resetSignaAturanMinum(),optionSemua(a),console.log("2")):"0"!=$("#tipeResep").val()&&""!=$("#tipeResep").val()||(resetSignaAturanMinum(),console.log("3"))}function sesuaikanResep(){"1"==$("#boolAdd").val()?($("#tipeResep").closest("div").find(".btn-white").closest("div").fadeOut("400",(function(){$("#tipeResep").closest("div").prepend('<button class="btn btn-primary btn-block" onclick="selesaiAdd(this);return false;" id="selesaikanAdd">Selesaikan Sirup</button>').hide().fadeIn(400)})),$("#ddlsigna").val("-2").selectpicker("refresh").closest(".input-group").fadeOut(500),$("#ddlAturanMinum").val("1").selectpicker("refresh").closest(".input-group").fadeOut(500),optionPuyer(null),$("#txtjumlah").val("").selectpicker("refresh").fadeIn(500),namaObatFocus()):"1"==$("#puyer").val()?($("#tipeResep").closest("div").find(".btn-white").closest("div").fadeOut("400",(function(){$("#tipeResep").closest("div").prepend('<button class="btn btn-info btn-block" onclick="selesaiPuyer(this);return false;" id="selesaikanPuyer">Selesaikan Puyer</button>').hide().fadeIn(400)})),$("#ddlsigna").val("-1").selectpicker("refresh").closest(".input-group").fadeOut(500),$("#ddlAturanMinum").val("1").selectpicker("refresh").closest(".input-group").fadeOut(500),$("#txtjumlah").val("").selectpicker("refresh").fadeIn(500),optionPuyer(null),namaObatFocus()):($("#tipeResep").closest("div").find(".btn-info").fadeOut("500",(function(){$(this).remove()})),$("#tipeResep").closest("div").find(".btn-primary").fadeOut("500",(function(){$(this).remove()})),$("#ddlsigna").val("").selectpicker("refresh").closest(".input-group").fadeIn(500),$("#tipeResep").val("0").selectpicker("refresh").closest("div").find(".btn-white").closest("div").fadeIn(500),$("#ddlAturanMinum").val("").selectpicker("refresh").closest(".input-group").fadeIn(500),$("#txtjumlah").val("").selectpicker("refresh").fadeIn(500),optionSemua(null),$("#boolSirupPuyer").val("0"))}function tipePuyer(){$("#boolSirupPuyer").val("1"),$("#puyer").val("1"),$("#tipeResep").closest("div").find(".btn-white").closest("div").fadeOut("400",(function(){$("#tipeResep").closest("div").prepend('<button class="btn btn-info btn-block" onclick="selesaiPuyer(this);return false;" id="selesaikanPuyer">Selesaikan Puyer</button>').hide().fadeIn(400)}))}function tipeSirup(){$("#boolSirupPuyer").val("1"),$("#tipeResep").closest("div").find(".btn-white").closest("div").fadeOut("400",(function(){$("#tipeResep").closest("div").prepend('<button class="btn btn-primary btn-block" onclick="selesaiAdd(this);return false;" id="selesaikanAdd">Selesaikan Sirup</button>').hide().fadeIn(400)})),optionPuyer(null),$("#txtjumlah").val("").selectpicker("refresh").fadeIn(500)}function hideTipeResepPuyer(a){$("#ddlsigna").val("-1").selectpicker("refresh").closest(".input-group").fadeOut(500),$("#ddlAturanMinum").val("1").selectpicker("refresh").closest(".input-group").fadeOut(500),optionPuyer(a)}function hideTipeResepSirup(a){$("#ddlsigna").val("-2").selectpicker("refresh").closest(".input-group").fadeOut(500),$("#txtjumlah").val("1").selectpicker("refresh").fadeOut(500),$("#ddlAturanMinum").val("1").selectpicker("refresh").closest(".input-group").fadeOut(500),optionSyrup(a)}function hideTipeResepSirup2(a){$("#ddlsigna").val("-2").selectpicker("refresh").closest(".input-group").fadeOut(500),$("#txtjumlah").val("1").selectpicker("refresh").fadeOut(500),$("#ddlAturanMinum").val("1").selectpicker("refresh").closest(".input-group").fadeOut(500),optionPuyer(a)}function submitTindakan(){var a=$("#selectTindakan").val();valJson=$.parseJSON(a);var t=valJson.biaya,e=valJson.jenis_tarif_id,i=$("#selectTindakan option:selected").text(),n=$.trim($("#keteranganTindakan").val());if("403"!=e&&"404"!=e&&"116"!=e||""!=n){if(""!=a){dataTindakan[dataTindakan.length]={jenis_tarif_id:e,jenis_tarif:i,biaya:t,keterangan_tindakan:n};var l=JSON.stringify(dataTindakan);$("#tindakan").val(l),viewTindakan(dataTindakan),resetInputTIndakan()}else validasi("#selectTindakan","Harus Diisi!"),resetInputTIndakan();optionBilaNebuBpjs()}else Swal.fire({icon:"error",title:"Oops...",text:"Keterangan Tindakan Harus Diisi!!"})}function viewTindakan(a){for(var t="",e=0;e<a.length;e++)t+="<tr>",t+="<td>"+a[e].jenis_tarif+"</td>",t+="<td>"+a[e].keterangan_tindakan+"</td>",t+='<td><button class="btn btn-danger btn-xs" value="'+e+'" onclick="tindakanDel(this)">hapus</button></td>',t+="</tr>";$("#ajaxTindakan").html(t),$("#tindakan").val(JSON.stringify(dataTindakan));t="";var i=0;for(e=0;e<a.length;e++)a[e].biaya>0&&(t+="<tr>",t+="<td>"+a[e].jenis_tarif+"</td>",t+='<td class="uang">'+a[e].biaya+"</td>",t+="</tr>",i+=a[e].biaya);$("#dibayarTIndakanBpjs").html(t),$("#TotalDibayarTindakanBPJS").html(i),rupiah(),bpjsBayar()}function tindakanDel(a){var t=$(a).val();dataTindakan.splice(t,1),viewTindakan(dataTindakan),resetInputTIndakan(),optionBilaNebuBpjs()}function resetInputTIndakan(){html='<input type="text" class="form-control" id="keteranganTindakan">',$("#keteranganTindakan").closest("tr").find(".keteranganTindakan").html(html),$("#keteranganTindakan").val(""),$("#selectTindakan").val(null).selectpicker("refresh").closest("tr").find(".btn-white").focus()}function dirujuk(){$("#confirmRujuk").hide(),$("#infoRujuk").removeClass("hide").hide().slideDown(500),$("#tujuan_rujuk2").focus()}function tidakDirujuk(){clearRujuk(),$("#submitFormPeriksa").click()}function rujukanSelesai(){""==$("#tujuan_rujuk2").val()?validasi("#tujuan_rujuk2","Harus Diisi!"):($("#tujuan_rujuk").val($("#tujuan_rujuk2").val()),$("#alasan_rujuk").val($("#alasan_rujuk2").val()),$("#submitFormPeriksa").click())}function cancelRujukan(){$("#modal-id").modal("hide"),clearRujuk()}function serial(){console.log($("#submitPeriksa").serializeArray())}function clearRujuk(){$("#tujuan_rujuk").val(""),$("#alasan_rujuk").val("")}function tabResepActive(){console.log("yeya"),namaObatFocus()}function diagnosaChange(){var a=$("#asuransi_id").val(),t=$("#pasien_id").val();$("#bb_input").val(),$("#ddlDiagnosa").val(),$("#staf_id").val();"32"==a&&$.post(base+"/poli/ajax/diagcha",{diagnosa_id:$("#ddlDiagnosa").val(),pasien_id:t},(function(a){if("1"==a.tidak_boleh_dirujuk){if($("#keterangan_boleh_dirujuk").empty(),""!=$("#ddlDiagnosa").val()||null!=$("#ddlDiagnosa").val()){var t='<div class="alert alert-danger" id="isi_pesan_fornas">'+$("#ddlDiagnosa option:selected").text()+" <strong>tidak boleh DIRUJUK </strong> pilih diagnosa lain (menurut ICD10) bila pasien memang benar2 harus dirujuk</div>";$("#keterangan_boleh_dirujuk").prepend(t).hide().fadeIn(500)}}else $("#keterangan_boleh_dirujuk").empty();a.ganti_diagnosa&&(Swal.fire({icon:"error",title:"Oops...",text:"Diagnosa Diabetes dan HT silahkan tempatkan di Diagnosa Tambahan, Mohon gunakan Diagnosa Lain untuk Diagnosa Utama"}),$("#ddlDiagnosa").val("").selectpicker("refresh"))})),generate();var e="";""!=$("#ddlDiagnosa").val()&&(e=$("#ddlDiagnosa option:selected").text()),-1!=e.indexOf("J45")?($("#lblDiagnosa").attr({title:"Bila Asma Berat","data-original-title":"Bila Asma Berat","data-content":"Jika ASMA BERAT, berikan bersama dexa inj IV 2 ampul, dan prednison 40 tab hr 1-2 :3x3, hr 3-4 : 3x2, hr 5-7 : 3x1, Decafil 20 tablet, termasuk untuk pasien BPJS"}),$("#lblDiagnosa").popover("show")):$("#lblDiagnosa").popover("hide")}function namaObatFocus(){$("#ddlNamaObat").closest("div").find(".btn-white").focus()}function clearResep(){$("#terapi").val("[]"),data=[],viewResep(""),namaObatFocus()}function generatePerscription(){var a=temp_sop_terapi;i_sop_terapi+=1;var t=parseInt(i_sop_terapi)+1,e=a[i_sop_terapi].terapi;e=JSON.stringify(e),t==length_sop_terapi&&(i_sop_terapi=-1),data=JSON.parse(e),$("#terapi").val(e),viewResep(resepJson(e)[1]),$("#tampungan_sop_terapi").html(t+"/"+length_sop_terapi)}function viewResep(a){if(console.log(viewResep),$("#ajax5").html(a),$("#plafon").length>0){var t=0,e=$("#terapi").val();e=JSON.parse(e),console.log(e);for(var i=0,n=0;n<e.length;n++)t+=(i=e[n].harga_jual_ini)*e[n].jumlah*$("#kali_obat").val(),console.log("harga dari "+e[n].merek+" = "+i);var l=$("#plafon_total").val()-t;console.log("totalBiayaObat = "+t),console.log("plafon value = "+$("#plafon_total").val()),console.log("plafon = "+l),console.log("plafon adalah = "+l),$("#plafon").html(l),l<0?($("#uangKekuranganFlat").html(rataAtas5000(Math.abs(l))),$("#kekuranganFlat").hasClass("hide")&&$("#kekuranganFlat").removeClass("hide")):$("#kekuranganFlat").hasClass("hide")||$("#kekuranganFlat").addClass("hide")}if($("#bilaTipeBPJS").length>0){var r="",d=0;for(n=0;n<data.length;n++)"0"==data[n].fornas&&(d+=data[n].harga_jual_ini*data[n].jumlah*$("#kali_obat").val(),r+="<tr>",r+="<td>"+data[n].merek_obat+"</td>",r+="<td>"+data[n].jumlah+"</td>",r+="</tr>");d=rataAtas5000(d),$("#bilaTipeBPJS").html(r),$("#totalBilaTipeBPJS").html(d),rupiah(),bpjsBayar()}$("#peringatan").empty()}function generate(){var a={asuransi_id:$("#asuransi_id").val(),pasien_id:$("#pasien_id").val(),berat_badan:$("#bb_input").val(),diagnosa_id:$("#ddlDiagnosa").val(),staf_id:$("#staf_id").val(),_token:$("#token").val()},t=$("#terapi").val();"1"==$("#hamil").val()||""!=t&&"[]"!=t||$.post(base+"/poli/ajax/sopterapi",a,(function(a){console.log(a),a=$.trim(a);var t=JSON.parse(a);if(temp_sop_terapi=t,length_sop_terapi=t.length,t[0]){var e=t[0].terapi;e=JSON.stringify(e),data=JSON.parse(e),$("#terapi").val(e),viewResep(resepJson(e)[1]),$("#tampungan_sop_terapi").html("1/"+length_sop_terapi),i_sop_terapi=0}else{e="[]";$("#terapi").val(e),viewResep(resepJson(e)[1]),temp_sop_terapi=[],$("#tampungan_sop_terapi").html("0"),i_sop_terapi=0}})).fail((function(a){console.log(a);var t=$.parseJSON(a.responseText);console.log(t),$.each(t,(function(a,t){$.gritter.add({title:"Error",text:t})}))}))}function generate2(){var a={asuransi_id:$("#asuransi_id").val(),pasien_id:$("#pasien_id").val(),berat_badan:$("#bb_input").val(),diagnosa_id:$("#ddlDiagnosa").val(),staf_id:$("#staf_id").val(),_token:$("#token").val()};$("#terapi").val();"1"!=$("#hamil").val()&&"1"==$("#dibantu").val()&&$.post(base+"/poli/ajax/sopterapi",a,(function(a){a=$.trim(a);var t=JSON.parse(a);if(temp_sop_terapi=t,length_sop_terapi=t.length,t[0]){var e=t[0].terapi;e=JSON.stringify(e),data=JSON.parse(e),$("#terapi").val(e),viewResep(resepJson(e)[1]),$("#tampungan_sop_terapi").html("1/"+length_sop_terapi),i_sop_terapi=0}else{e="[]";$("#terapi").val(e),viewResep(resepJson(e)[1]),temp_sop_terapi=[],$("#tampungan_sop_terapi").html("0"),i_sop_terapi=0}}))}function hasil(){var a=$("#usg_presentasi").val(),t="",e=$("#usg_sex").val(),i=$("#usg_plasenta").val(),n=$("#usg_ltp").val(),l=$("#uk").val(),r=$("#usg_efw").val(),d=$("#usg_djj").val(),s="G"+$("#G").val()+"P"+$("#P").val()+"A"+$("#A").val(),o=$("#total_afi").val(),u="",p=$.trim(l.split("minggu")[0]);console.log("umur_kehamilan = "+l),console.log("minggu = "+p),p>=12&&p<=24?u=$("#BPD_w").val()+" minggu "+$("#BPD_d").val()+" hari":p>=24&&(u=$("#FL_w").val()+" minggu "+$("#FL_d").val()+" hari"),console.log("uk_usg = "+u);var c="cukup";parseInt(o)>8?(c="berlebihan",t+="polihydramnion, "):parseInt(o)<2&&(c="kurang",t+="oligohydramnion, ");var m="normal";parseInt(d)>160?(m="tinggi",t+="takikardia fungsional dd/ Gawat Janin, "):parseInt(d)<120&&(m="rendah",t+="Gawat Janin, "),"0"==n&&(n="tidak ada");var g="Janin presentasi "+a+", denyut jantung janin "+m+" "+d+" x/mnt, "+n+" lilitan tali pusat, perikiraan berat janin "+r+" gr";g+=", umur kehamilan menurut USG saat ini = "+u,g+=", jenis kelamin "+e+", plasenta di "+i+", cairan ketuban 1 kantong terdalam "+o+", "+c+", "+s+"H"+l+", Janin presentasi "+a+", "+t;var f="4 minggu lagi";p>=37?f="1 minggu lagi":p>=32&&(f="2 minggu lagi"),$("#saran").val("periksa lagi "+f),console.log(g),$("#kesimpulan").val(g)}function riwObsG(){if(""!=$("#G").val()&&$("#G").val()<10){var a=$("#pasien_id").val();$.post(base+"/anc/registerhamil",{G:$("#G").val(),pasien_id:a},(function(a,t,e){if(""!=a){if(console.log(a),null!=a.buku)var i=a.buku.id;else i=3;$("#hpht").val(a.hpht),$("#uk").val(a.uk),$("#P").val(a.p),$("#A").val(a.a),$("#tanggal_lahir_anak_terakhir").val(a.tanggal_lahir_anak_terakhir),$("#golongan_darah").val(a.golongan_darah),$("#rencana_penolong").val(a.rencana_penolong),$("#rencana_tempat").val(a.rencana_tempat),$("#rencana_pendamping").val(a.rencana_pendamping),$("#rencana_transportasi").val(a.rencana_transportasi),$("#rencana_pendonor").val(a.rencana_pendonor),$("#tb").val(a.tb),$("#jumlah_janin").val(a.jumlah_janin),$("#status_imunisasi_tt_id").val(a.status_imunisasi_tt_id),$("#nama_suami").val(a.nama_suami),$("#buku").val(i),$("#bb_sebelum_hamil").val(a.bb_sebelum_hamil),$("#riwayat_kehamilan").val(a.riwayat_kehamilan_sebelumnya),uk_exec("uk","hpht"),viewNoFocus()}}))}else $(".gpa2").val(""),$(".panelRiwayat").val(""),$("#riwayat_kehamilan").val("[]"),viewNoFocus()}function fokusKeAnemnesa(){$("#cekFoto").modal("hide"),$("#cekFoto").on("hidden.bs.modal",(function(a){$("#anamnesa").focus(),$("#labelKecelakaanKerja").on("shown.bs.popover",(function(){setTimeout((function(){$("#labelKecelakaanKerja").popover("hide")}),8e3)})),$("#labelKecelakaanKerja").popover("show")}))}function showFotoZoom(){$("#fotozoom").modal("show")}function rupiah(){$('.uang:not(:contains("Rp."))').each((function(){var a=$(this).html();a=a.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),$(this).html("Rp. "+a+" ,-")}))}function kecelakaanKerjaChange(a){var t=$("#asuransi_id").val(),e=$(a).val(),i=$("#antrianperiksa_id").val();"32"==t&&"1"==e&&($("#pleaseWaitDialog").modal({backdrop:"static",keyboard:!1}),$.ajax({url:base+"/poli/ajax/kkchange",type:"POST",data:{antrianperiksa_id:i}}).done((function(){location.reload(!0)})).fail((function(){$("#pleaseWaitDialog").modal("hide"),console.log("error")})))}function asuransiIdChange(a){var t=$(a).val(),e=$("#antrianperiksa_id").val();$("#pleaseWaitDialog").modal({backdrop:"static",keyboard:!1}),$.ajax({url:base+"/poli/ajax/asuridchange",type:"POST",data:{asuransi_id:t,antrianperiksa_id:e}}).done((function(){location.reload(!0)})).fail((function(){$("#pleaseWaitDialog").modal("hide"),console.log("error")})).always((function(){console.log("complete")}))}function bpjsBayar(){if("32"==$("#asuransi_id").val()){var a=$("#TotalDibayarTindakanBPJS").html(),t=$("#totalBilaTipeBPJS").html();"Rp. ,-"==t&&(t="Rp. 0,-"),"Rp. ,-"==a&&(a="Rp. 0,-");var e=parseInt(cleanUang(a))+parseInt(cleanUang(t));$("#jumlahDibayarBpjs").html(e),e>0?$("#adaYangDibayar").hide().fadeIn(500):$("#adaYangDibayar").hide(),rupiah()}}function bukanAsmaAkut(){apakahAsmaAkut(false);updateKeteranganNebuBpjs("Tindakan BPJS pasien ini tidak ditanggung BPJS, karena bukan asma akut. Tekan pilihan di bawah ini untuk mengubah",false)}function asmaAkut(){apakahAsmaAkut(true);updateKeteranganNebuBpjs("Nebulizer ditanggung BPJS karena asma akut. Tekan pilihan di bawah ini untuk mengubah ",true)}function optionBilaNebuBpjs(){for(var a=tindakansArray(),t=!1,e=0;e<a.length;e++)if("102"==a[e].jenis_tarif_id||"103"==a[e].jenis_tarif_id){t=!0;break}t&&"32"==$("#asuransi_id").val()?$("#option_bila_nebu_bpjs").hide().fadeIn(500):$("#option_bila_nebu_bpjs").fadeOut(500)}function tindakansArray(){var a=$("#tindakan").val();return a=$.parseJSON(a)}function apakahAsmaAkut(a){if(a)var t="(ditanggung)",e=0,i=0;else t=" (TIDAK DITANGGUNG BPJS)",e=45e3,i=4e4;for(var n=tindakansArray(),l=0;l<n.length;l++)if("102"==n[l].jenis_tarif_id||"103"==n[l].jenis_tarif_id){t=n[l].keterangan;var r=n[l].jenis_tarif_id;if(n.splice(l,1),"102"==r)var d={jenis_tarif_id:"102",jenis_tarif:"Nebulizer Anak "+t,biaya:e,keterangan_tindakan:t};else d={jenis_tarif_id:"103",jenis_tarif:"Nebulizer Dewasa "+t,biaya:i,keterangan_tindakan:t};n[n.length]=d}var s=JSON.stringify(n);$("#tindakan").val(s)}function updateKeteranganNebuBpjs(a,t){$("#keterangan_nebu_bpjs").html(a);var e=$("#option_bila_nebu_bpjs");t?(e.hasClass("alert-danger")||e.hasClass("alert-warning"))&&(e.removeClass("alert-danger"),e.removeClass("alert-warning"),e.addClass("alert-success")):(e.hasClass("alert-warning")||e.hasClass("alert-success"))&&(e.removeClass("alert-success"),e.removeClass("alert-warning"),e.addClass("alert-danger")),$("#option_bila_nebu_bpjs").hide().fadeIn(500)}function bahanHabisPakai(){for(var a=dataTindakan,t="",e=0;e<a.length;e++)t+=a[e].jenis_tarif+" : "+a[e].keterangan_tindakan+", \n";console.log(dataTindakan);var i=JSON.stringify(dataTindakan);$.post(base+"/poli/ajax/bhp_tindakan",{jsonData:i,_token:$("#token").val()},(function(a,t,e){if(console.log(a),(a=$.parseJSON(a)).length>0){var i='<div class="alert alert-success">';i+='<h3 class="text-center">Daftar Bahan Habis Pakai Tindakan</h3>',i+='<table class="table table-condensed"><tbody>';for(var n=0,l=a.length;n<l;n++)i+="<tr>",i+='<td> R/ <a nowrap="" href="#" onclick="informasi(this); return false; " data-value="'+a[n].merek_id+'" data-toggle="modal" data-target=".bs-example-modal-lg">'+a[n].merek+"</a></td>",i+='<td class"text-right"> No : '+a[n].jumlah+"</td>",i+="</tr>";i+="</tbody></table>",i+='<p class="text-center">Tidak Perlu diinput lagi</p></div>',$("#bhp_tindakan").html(i)}else $("#bhp_tindakan").html("")})),$("#pemeriksaan_penunjang").val(t).focus()}function dummySubmit(){var a=$("#puyer").val(),t=$("#boolAdd").val(),e=$("#adatindakan").val(),i=$.parseJSON($("#tindakan").val());if("1"==t||"1"==a)return Swal.fire("Oops!","Puyer atau Add Sirup belum selesai. Resep tidak bisa dilanjutkan sebelum diselesaikan","error"),!1;if(""==$("#anamnesa").val()||""==$("#ddlDiagnosa").val())return Swal.fire("Oops!","Anamnesa dan Diagnosa tidak boleh dikosongkan!!","error"),$("#tab-status").tab("show"),""==$("#anamnesa").val()&&validasi("#anamnesa","Harus Diisi!"),""==$("#ddlDiagnosa").val()&&validasi2("#ddlDiagnosa","Harus Diisi!"),!1;if("1"==e){for(var n=0,l=0;l<i.length;l++)"1"!=i[l].jenis_tarif_id&&"9"!=i[l].jenis_tarif_id&&"140"!=i[l].jenis_tarif_id&&n++;if(0==n){if(!confirm("Apa Anda lupa isi kolom tindakan? Jika anda yakin bahwa tidak ada tindakan tambahan, tekan tombol OK"))return!1;$("#submitFormPeriksa").click()}else $("#submitFormPeriksa").click()}else $("#submitFormPeriksa").click()}function refresh(){var a={antrianperiksa_id:$("#antrianperiksa_id").val()};$.post(base+"/poli/ajax/ambil_gambar",a,(function(a){console.log("data = "+a);for(var t="",e=0,i=(a=JSON.parse(a)).length;e<i;e++)isEven(e)&&(t+='<div class="row">'),t+='<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">',t+='<img src="'+base_s3+"/img/estetika/"+a[e].image+'" class="img-thumbnails" alt="">',t+="</div>",isOdd(e)&&(t+="</div><br />");isEven(e)&&""!=t&&(t+="</div>"),$("#gambar").html(t)}))}function submitAlergi(a){var t=$("#pasien_id").val(),e=$("#antrianperiksa_id").val(),i={pasien_id:t,generik_id:$("#generik_list_alergi").val()};$.post(base+"/poli/"+e+"/alergies",i,(function(a,t,e){if($("#myModal").modal("hide"),$("#generik_list_alergi").val(""),$("#generik_list_alergi").selectpicker("refresh"),"1"==a.valid){for(var i="",n=a.alergi.length-1;n>=0;n--)i+="<tr>",i+='<td class="nama_obat">',i+=a.alergi[n].generik,i+="</td>",i+='<td class="nama_obat">',i+='<button class="btn btn-danger btn-sm" onclick="deleteAlergi('+a.alergi[n].id+', this);return false;" type="submit"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Delete</button>',i+="</td>",i+="</tr>";$("#alergy_body_table").html(i)}else Swal.fire("Oops!","obat yang sama sudah ada di dalam database alergi untuk pasien ini","error")}))}function deleteAlergi(a,t){var e=$(t).closest("tr").find(".nama_obat").html();if(confirm("Anda yakin mau menghapus "+e+" dari daftar alergi pasien ini?")){var i={alergi_id:a,pasien_id:$("#pasien_id").val()};return $.post(base+"/poli/ajax/alergies/delete",i,(function(a,t,e){$("#myModal").modal("hide");var i="";if(a.length>0)for(var n=a.length-1;n>=0;n--)i+="<tr>",i+='<td class="nama_obat">',i+=a[n].generik,i+="</td>",i+="<td>",i+='<button class="btn btn-danger btn-sm" onclick="deleteAlergi('+a[n].id+', this);return false;" type="submit"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Delete</button>',i+="</td>",i+="</tr>";else i+='<tr class="text-center">',i+='<td colspan="2">',i+="Tidak ada data untuk ditampilkan :p",i+="</td>",i+="</tr>";$("#alergy_body_table").html(i)})),!1}}function generik_list_change(){var a=$("#generik_list_alergi").val();console.log("disabled = "+$("#myModal").find(".submit_button").hasClass("disabled")),console.log("not null = "+!!a),a&&$("#myModal").find(".submit_button").hasClass("disabled")?$("#myModal").find(".submit_button").removeClass("disabled"):a||$("#myModal").find(".submit_button").hasClass("disabled")||$("#myModal").find(".submit_button").addClass("disabled")}function selectChange(a){var t="",e=$(a).val(),i=(e=$.parseJSON(e)).jenis_tarif_id;"403"==i||"404"==i?(t='<select class="form-control" id="keteranganTindakan">',t+='<option value="" selected="selected"> - Pilih - </option>',t+='<option value="negatif">NON REAKTIF / NEGATIF</option>',t+='<option value="positif">REAKTIF / POSITIF</option>',t+="</select>"):"116"==i?t+='<input type="text" placeholder="hanya angka" class="form-control" id="keteranganTindakan" onkeypress="return angka(event)">':t='<input type="text" class="form-control" id="keteranganTindakan">',$(a).closest("tr").find(".keteranganTindakan").html(t)}function showFotoZoom(){$("#fotozoom").modal("show")}function resepJson(a){if(""!=a)var t=JSON.parse(a);else t="";var e='<table width="100%">';if(t.length>0){for(var i=0;i<t.length-1;i++)"Puyer"==t[i].signa.substring(0,5)&&"0"==$("#puyer").val()?(e+="<tr>",e+='<td style="width:15px">R/</td>',e+='<td style="text-align:left; width:150px;" nowrap>'+t[i].merek_obat+" <strong>[  "+t[i].rak_id+"  ]</strong></td>",e+="<td> No : "+t[i].jumlah+"</td>",e+="</tr>",t[i].signa==t[i+1].signa?$("#puyer").val("1"):$("#puyer").val("0")):"Puyer"==t[i].signa.substring(0,5)&&"1"==$("#puyer").val()?(e+="<tr>",e+='<td style="width:15px"></td>',e+='<td style="text-align:left; width:150px;" nowrap>'+t[i].merek_obat+" <strong>[  "+t[i].rak_id+"  ]</strong></td>",e+="<td> No : "+t[i].jumlah+"</td>",e+="</tr>",t[i].signa==t[i+1].signa?$("#puyer").val("1"):$("#puyer").val("0")):-1==t[i].merek_id||-3==t[i].merek_id?(e+="<tr>",e+='<td style="width:15px"></td>',e+='<td style="width:150px;border-bottom:1px solid #000;" nowrap class="merek">Buat Menjadi '+t[i].jumlah+" puyer "+t[i].signa+"</td>",e+='<td style="border-bottom:1px solid #000;"  nowrap>'+t[i].aturan_minum+"</td>",e+="</tr>",$("#puyer").val("0")):"Add"==t[i].signa.substring(0,3)&&"0"==$("#boolAdd").val()?(e+="<tr>",e+='<td style="width:15px">R/</td>',e+='<td style="width:150px;text-align:left;" nowrap>'+t[i].merek_obat+" <strong>[  "+t[i].rak_id+"  ]</strong></td>",e+="<td> fls No : "+t[i].jumlah+"</td>",e+="</tr>",e+="<tr>",e+='<td style="text-align:center;" colspan="3">ADD</td>',e+="</tr>",$("#boolAdd").val("1")):"Add"==t[i].signa.substring(0,3)&&"1"==$("#boolAdd").val()?(e+="<tr>",e+='<td style="width:15px"></td>',e+='<td style="width:150px;text-align:left;" nowrap>'+t[i].merek_obat+" <strong>[  "+t[i].rak_id+"  ]</strong></td>",e+="<td> No : "+t[i].jumlah+"</td>",e+="</tr>",t[i].signa==t[i+1].signa?$("#boolAdd").val("1"):$("#boolAdd").val("0")):-2==t[i].merek_id?(e+="<tr>",e+='<td style="width:15px"></td>',e+='<td style="width:150px;border-bottom:1px solid #000;">S Masukkan ke dalam sirup '+t[i].signa+" </td>",e+='<td style="border-bottom:1px solid #000;">Dihabiskan</td>',e+="</tr>",$("#puyer").val("0")):(e+="<tr>",e+='<td style="width:15px">R/</td>',e+='<td style="width:150px;text-align:left;" nowrap>'+t[i].merek_obat+" <strong>[  "+t[i].rak_id+"  ]</strong></td>",e+="<td> No : "+t[i].jumlah+"</td>",e+="</tr><tr>",e+='<td style="width:15px"></td>',e+='<td style="width:150px;border-bottom:1px solid #000;"> S '+t[i].signa+"</td>",e+='<td style="border-bottom:1px solid #000;" nowrap>'+t[i].aturan_minum+"</td>",e+="</tr>");-1==t[d=t.length-1].merek_id||-3==t[d].merek_id?(e+="<tr>",e+='<td style="width:15px"></td>',e+='<td style="width:150px;border-bottom:1px solid #000;" nowrap class="merek">Buat Menjadi '+t[d].jumlah+" puyer "+t[d].signa+"</td>",e+='<td style="border-bottom:1px solid #000;" nowrap>'+t[d].aturan_minum+"</td>",$("#puyer").val("0")):-2==t[d].merek_id?(e+="<tr>",e+='<td style="width:15px"></td>',e+='<td style="width:150px;border-bottom:1px solid #000;" >S Masukkan ke dalam sirup '+t[d].signa+"</td>",e+='<td style="border-bottom:1px solid #000;">Dihabiskan</td>',$("#boolAdd").val("0")):"Add"==t[d].signa.substring(0,3)&&"0"==$("#boolAdd").val()?(e+="<tr>",e+='<td style="width:15px">R/</td>',e+='<td style="width:150px;" nowrap>'+t[d].merek_obat+" <strong>[  "+t[d].rak_id+"  ]</strong></td>",e+="<td> fls No : "+t[d].jumlah+"</td>",e+="</tr>",e+="<tr>",e+='<td  style="text-align:center;" colspan="3">ADD</td>',$("#boolAdd").val("1"),id_formula_sirup_add=t[d].formula_id,console.log("id_formula_sirup_add = "+id_formula_sirup_add)):"Add"==t[d].signa.substring(0,3)&&"1"==$("#boolAdd").val()?(e+="<tr>",e+='<td style="width:15px"></td>',e+='<td style="width:150px;" nowrap>'+t[d].merek_obat+" <strong>[  "+t[d].rak_id+"  ]</strong></td>",e+="<td> No : "+t[d].jumlah+"</td>","150802040"==t[d].formula_id&&"150803008"==id_formula_sirup_add||"150806007"==t[d].formula_id&&"150803003"==id_formula_sirup_add||"150803047"==t[d].formula_id&&"150803006"==id_formula_sirup_add||"150806005"==t[d].formula_id&&"150921001"==id_formula_sirup_add||(addSatu=!0)):"Puyer"==t[d].signa.substring(0,5)&&"0"==$("#puyer").val()?(e+="<tr>",e+='<td style="width:15px">R/</td>',e+='<td style="width:150px;text-align:left;" nowrap>'+t[d].merek_obat+" <strong>[  "+t[d].rak_id+"  ]</strong></td>",e+="<td> No : "+t[d].jumlah+"</td>"):"Puyer"==t[d].signa.substring(0,5)&&"1"==$("#puyer").val()?(e+="<tr>",e+='<td style="width:15px"></td>',e+='<td style="width:150px;text-align:left;" nowrap>'+t[d].merek_obat+" <strong>[  "+t[d].rak_id+"  ]</strong></td>",e+="<td> No : "+t[d].jumlah+"</td>"):(e+="<tr>",e+='<td style="width:15px">R/</td>',e+='<td style="width:150px;text-align:left;" nowrap>'+t[d].merek_obat+" <strong>[  "+t[d].rak_id+"  ]</strong></td>",e+="<td> No : "+t[d].jumlah+"</td>",e+="</tr><tr>",e+='<td style="width:15px"></td>',e+='<td style="width:150px;border-bottom:1px solid #000;"> S '+t[d].signa+"</td>",e+='<td style="border-bottom:1px solid #000;" nowrap>'+t[d].aturan_minum+"</td>")}e+="</tr></table>",$("#puyer").val("0"),$("#boolAdd").val("0");var n='<table class="RESEP table table-condensed"><tbody>',l=[];if(t.length>0){for(i=0;i<t.length-1;i++)"Puyer"==t[i].signa.substring(0,5)&&"0"==$("#puyer").val()?((l=[])[l.length]={id:i},n+="<tr>",n+='<td style="width:15px">R/</td>',n+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[i].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[i].merek_obat+"</a></t[d>  ",n+="<td>   No : "+t[i].jumlah+"</td>",n+='<td class="displayNone">'+t[i].merek_id+"</td>",n+="<td></td>",n+="</tr>",t[i].signa==t[i+1].signa?$("#puyer").val("1"):$("#puyer").val("0")):"Puyer"==t[i].signa.substring(0,5)&&"1"==$("#puyer").val()?(l[l.length]={id:i},n+="<tr>",n+='<td style="width:15px"></td>',n+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[i].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[i].merek_obat+"</a></t[d>  ",n+="<td>   No : "+t[i].jumlah+"</td>",n+='<td class="displayNone">'+t[i].merek_id+"</td>",n+="<td></td>",n+="</tr>",t[i].signa==t[i+1].signa?$("#puyer").val("1"):$("#puyer").val("0")):-1==t[i].merek_id||-3==t[i].merek_id?(l[l.length]={id:i},n+="<tr>",n+='<td style="width:15px"></td>',n+='<td style="border-bottom:1px solid #000;" nowrap class="merek" >Buat Menjadi '+t[i].jumlah+" puyer "+t[i].signa+"</td>",n+='<td style="border-bottom:1px solid #000;" nowrap>'+t[i].aturan_minum+"</td>",n+="<td><button class='btn btn-danger btn-sm' onclick='rowdel(this)' type='button' value='"+JSON.stringify(l)+"'>hapus</button></td>",n+='<td class="displayNone">'+t[i].merek_id+"</td>",n+="</tr>",$("#puyer").val("0")):"Add"==t[i].signa.substring(0,3)&&"0"==$("#boolAdd").val()?((l=[])[l.length]={id:i},n+="<tr>",n+='<td style="width:15px">R/</td>',n+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[i].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[i].merek_obat+"</a></t[d>",n+="<td> fls No : "+t[i].jumlah+"</td>",n+='<td class="displayNone">'+t[i].merek_id+"</td>",n+="<td></td>",n+="</tr>",n+="<tr>",n+='<td  style="text-align:center;" colspan="3">ADD</td>',n+='<td class="displayNone"></td>',n+="<td></td>",n+="</tr>",id_formula_sirup_add=t[i].formula_id,addSatu=!1,console.log("id_formula_sirup_add = "+id_formula_sirup_add),$("#boolAdd").val("1")):"Add"==t[i].signa.substring(0,3)&&"1"==$("#boolAdd").val()?(l[l.length]={id:i},n+="<tr>",n+='<td style="width:15px"></td>',n+='<td style="text-align:left;"><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[i].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[i].merek_obat+"</a></t[d>  ",n+="<td>   No : "+t[i].jumlah+"</td>",n+='<td class="displayNone">'+t[i].merek_id+"</td>",n+="<td></td>",n+="</tr>","150802040"==t[d].formula_id&&"150803008"==id_formula_sirup_add||"150806007"==t[d].formula_id&&"150803003"==id_formula_sirup_add||"150803047"==t[d].formula_id&&"150803006"==id_formula_sirup_add||"150806005"==t[d].formula_id&&"150921001"==id_formula_sirup_add||(addSatu=!0),t[i].signa==t[i+1].signa?$("#boolAdd").val("1"):$("#boolAdd").val("0")):-2==t[i].merek_id?(l[l.length]={id:i},n+="<tr>",n+='<td style="width:15px"></td>',n+='<td style="border-bottom:1px solid #000;" >S Masukkan ke dalam sirup '+t[i].signa+"</td>",n+='<td style="border-bottom:1px solid #000;">Dihabiskan</td>',n+="<td><button class='btn btn-danger btn-sm' onclick='rowdel(this)' type='button' value='"+JSON.stringify(l)+"'>hapus</button></td>",n+='<td class="displayNone"></td>',n+="</tr>",$("#puyer").val("0")):((l=[])[l.length]={id:i},n+="<tr>",n+='<td style="width:15px">R/</td>',n+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[i].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[i].merek_obat+"</a></t[d>  ",n+="<td>   No : "+t[i].jumlah+"</td>",n+='<td class="displayNone">'+t[i].merek_id+"</td>",n+="<td></td>",n+="</tr><tr>",n+='<td style="width:15px"></td>',n+='<td style="border-bottom:1px solid #000;"> S '+t[i].signa+"</td>",n+='<td style="border-bottom:1px solid #000;" nowrap>'+t[i].aturan_minum+"</td>",n+='<td class="displayNone"></td>',n+="<td><button class='btn btn-danger btn-sm' onclick='rowdel(this)' type='button' value='"+JSON.stringify(l)+"'>hapus</button></td>",n+="</tr>");-1==t[d=t.length-1].merek_id||-3==t[d].merek_id?(console.log(t[d].merek_id+" = 1"),(l=[])[l.length]={id:d},n+="<tr>",n+='<td style="width:15px"></td>',n+='<td style="border-bottom:1px solid #000;" nowrap class="merek" >Buat Menjadi '+t[d].jumlah+" puyer "+t[d].signa+"</td>",n+='<td style="border-bottom:1px solid #000;" nowrap>'+t[d].aturan_minum+"</td>",n+="<td><button class='btn btn-danger btn-sm' onclick='rowdel(this)' type='button' value='"+JSON.stringify(l)+"'>hapus</button></td>",n+='<td class="displayNone"></td>',n+="<td></td>",$("#puyer").val("0")):-2==t[d].merek_id?(console.log(t[d].merek_id+" = 2"),(l=[])[l.length]={id:d},n+="<tr>",n+='<td style="width:15px"></td>',n+='<td style="border-bottom:1px solid #000;">S Masukkan ke dalam sirup '+t[d].signa+"</td>",n+='<td style="border-bottom:1px solid #000;">Dihabiskan</td>',n+="<td><button class='btn btn-danger btn-sm' onclick='rowdel(this)' type='button' value='"+JSON.stringify(l)+"'>hapus</button></td>",n+='<td class="displayNone"></td>',$("#boolAdd").val("0")):"Add"==t[d].signa.substring(0,3)&&"0"==$("#boolAdd").val()?(console.log(t[d].merek_id+" = 3"),(l=[])[l.length]={id:d},n+="<tr>",n+='<td style="width:15px">R/</td>',n+='<td><a data-target=".bs-example-modal-lg" data-toggle="modal" value="'+t[d].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[d].merek_obat+"</a></td>",n+="<td> fls No : "+t[d].jumlah+"</td>",n+='<td class="displayNone">'+t[d].merek_id+"</td>",n+="<td></td>",n+="</tr>",n+="<tr>",n+='<td  style="text-align:center;" colspan="3">ADD</td>',n+="<td><button class='btn btn-danger btn-sm' onclick='rowdel(this)' type='button' value='"+JSON.stringify(l)+"'>hapus</button></td>",n+='<td class="displayNone"></td>',$("#boolAdd").val("1")):"Add"==t[d].signa.substring(0,3)&&"1"==$("#boolAdd").val()?((l=[])[l.length]={id:d},console.log(t[d].merek_id+" = 4"),n+="<tr>",n+='<td style="width:15px"></td>',n+='<td><a data-target=".bs-example-modal-lg" data-toggle="modal" value="'+t[d].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[d].merek_obat+"</a></td>",n+="<td> No : "+t[d].jumlah+"</td>",n+="<td><button class='btn btn-danger btn-sm' onclick='rowdel(this)' type='button' value='"+JSON.stringify(l)+"'>hapus</button></td>",n+='<td class="displayNone">'+t[d].merek_id+"</td>","150802040"==t[d].formula_id&&"150803008"==id_formula_sirup_add||"150806007"==t[d].formula_id&&"150803003"==id_formula_sirup_add||"150803047"==t[d].formula_id&&"150803006"==id_formula_sirup_add||"150806005"==t[d].formula_id&&"150921001"==id_formula_sirup_add||(addSatu=!0)):"Puyer"==t[d].signa.substring(0,5)&&"0"==$("#puyer").val()?((l=[])[l.length]={id:d},console.log(t[d].merek_id+" = 5"),n+="<tr>",n+='<td style="width:15px">R/</td>',n+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[d].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[d].merek_obat+"</a></td>",n+="<td> No : "+t[d].jumlah+"</td>",n+="<td><button class='btn btn-danger btn-sm' onclick='rowdel(this)' type='button' value='"+JSON.stringify(l)+"'>hapus</button></td>",n+='<td class="displayNone">'+t[d].merek_id+"</td>",$("#puyer").val("1")):"Puyer"==t[d].signa.substring(0,5)&&"1"==$("#puyer").val()?(console.log(t[d].merek_id+" = 6"),(l=[])[l.length]={id:d},n+="<tr>",n+='<td style="width:15px"></td>',n+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[d].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[d].merek_obat+"</a></td>",n+="<td> No : "+t[d].jumlah+"</td>",n+="<td><button class='btn btn-danger btn-sm' onclick='rowdel(this)' type='button' value='"+JSON.stringify(l)+"'>hapus</button></td>",n+='<td class="displayNone">'+t[d].merek_id+"</td>"):(console.log(t[d].merek_id+" = 7"),(l=[])[l.length]={id:d},n+="<tr>",n+='<td style="width:15px">R/</td>',n+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[d].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[d].merek_obat+"</a></td>",n+="<td> No : "+t[d].jumlah+"</td>",n+='<td class="displayNone">'+t[d].merek_id+"</td>",n+="<td></td>",n+="</tr><tr>",n+='<td style="width:15px"></td>',n+='<td style="border-bottom:1px solid #000;"> S '+t[d].signa+"</td>",n+='<td style="border-bottom:1px solid #000;" nowrap>'+t[d].aturan_minum+"</td>",n+="<td><button class='btn btn-danger btn-sm' onclick='rowdel(this)' type='button' value='"+JSON.stringify(l)+"'>hapus</button></td>",n+='<td class="displayNone"></td>'),n+="</tr></tbody></table>"}else n="",e="";$("#puyer").val("0"),$("#boolAdd").val("0");var r='<table class="RESEP table table-condensed"><tbody>';l=[];if(t.length>0){for(i=0;i<t.length-1;i++)"Puyer"==t[i].signa.substring(0,5)&&"0"==$("#puyer").val()?((l=[])[l.length]={id:i},r+="<tr>",r+='<td style="width:15px">R/</td>',r+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[i].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[i].merek_obat+"</a></t[d>  ",r+="<td>   No : "+t[i].jumlah+"</td>",r+='<td class="displayNone">'+t[i].merek_id+"</td>",r+="</tr>",t[i].signa==t[i+1].signa?$("#puyer").val("1"):$("#puyer").val("0")):"Puyer"==t[i].signa.substring(0,5)&&"1"==$("#puyer").val()?(l[l.length]={id:i},r+="<tr>",r+='<td style="width:15px"></td>',r+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[i].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[i].merek_obat+"</a></t[d>  ",r+="<td>   No : "+t[i].jumlah+"</td>",r+='<td class="displayNone">'+t[i].merek_id+"</td>",r+="</tr>",t[i].signa==t[i+1].signa?$("#puyer").val("1"):$("#puyer").val("0")):-1==t[i].merek_id||-3==t[i].merek_id?(l[l.length]={id:i},r+="<tr>",r+='<td style="width:15px"></td>',r+='<td style="border-bottom:1px solid #000;" nowrap class="merek" >Buat Menjadi '+t[i].jumlah+" puyer "+t[i].signa+"</td>",r+='<td style="border-bottom:1px solid #000;" nowrap>'+t[i].aturan_minum+"</td>",r+='<td class="displayNone">'+t[i].merek_id+"</td>",r+="</tr>",$("#puyer").val("0")):"Add"==t[i].signa.substring(0,3)&&"0"==$("#boolAdd").val()?((l=[])[l.length]={id:i},r+="<tr>",r+='<td style="width:15px">R/</td>',r+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[i].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[i].merek_obat+"</a></t[d>",r+="<td> fls No : "+t[i].jumlah+"</td>",r+='<td class="displayNone">'+t[i].merek_id+"</td>",r+="</tr>",r+="<tr>",r+='<td  style="text-align:center;" colspan="3">ADD</td>',r+='<td class="displayNone"></td>',r+="</tr>",id_formula_sirup_add=t[i].formula_id,addSatu=!1,console.log("id_formula_sirup_add = "+id_formula_sirup_add),$("#boolAdd").val("1")):"Add"==t[i].signa.substring(0,3)&&"1"==$("#boolAdd").val()?(l[l.length]={id:i},r+="<tr>",r+='<td style="width:15px"></td>',r+='<td style="text-align:left;"><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[i].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[i].merek_obat+"</a></t[d>  ",r+="<td>   No : "+t[i].jumlah+"</td>",r+='<td class="displayNone">'+t[i].merek_id+"</td>",r+="</tr>","150802040"==t[d].formula_id&&"150803008"==id_formula_sirup_add||"150806007"==t[d].formula_id&&"150803003"==id_formula_sirup_add||"150803047"==t[d].formula_id&&"150803006"==id_formula_sirup_add||"150806005"==t[d].formula_id&&"150921001"==id_formula_sirup_add||(addSatu=!0),t[i].signa==t[i+1].signa?$("#boolAdd").val("1"):$("#boolAdd").val("0")):-2==t[i].merek_id?(l[l.length]={id:i},r+="<tr>",r+='<td style="width:15px"></td>',r+='<td style="border-bottom:1px solid #000;" >S Masukkan ke dalam sirup '+t[i].signa+"</td>",r+='<td style="border-bottom:1px solid #000;">Dihabiskan</td>',r+='<td class="displayNone"></td>',r+="</tr>",$("#puyer").val("0")):((l=[])[l.length]={id:i},r+="<tr>",r+='<td style="width:15px">R/</td>',r+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[i].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[i].merek_obat+"</a></t[d>  ",r+="<td>   No : "+t[i].jumlah+"</td>",r+='<td class="displayNone">'+t[i].merek_id+"</td>",r+="</tr><tr>",r+='<td style="width:15px"></td>',r+='<td style="border-bottom:1px solid #000;"> S '+t[i].signa+"</td>",r+='<td style="border-bottom:1px solid #000;" nowrap>'+t[i].aturan_minum+"</td>",r+='<td class="displayNone"></td>',r+="</tr>");var d;-1==t[d=t.length-1].merek_id||-3==t[d].merek_id?(console.log(t[d].merek_id+" = 1"),(l=[])[l.length]={id:d},r+="<tr>",r+='<td style="width:15px"></td>',r+='<td style="border-bottom:1px solid #000;" nowrap class="merek" >Buat Menjadi '+t[d].jumlah+" puyer "+t[d].signa+"</td>",r+='<td style="border-bottom:1px solid #000;" nowrap>'+t[d].aturan_minum+"</td>",r+='<td class="displayNone"></td>',$("#puyer").val("0")):-2==t[d].merek_id?(console.log(t[d].merek_id+" = 2"),(l=[])[l.length]={id:d},r+="<tr>",r+='<td style="width:15px"></td>',r+='<td style="border-bottom:1px solid #000;">S Masukkan ke dalam sirup '+t[d].signa+"</td>",r+='<td style="border-bottom:1px solid #000;">Dihabiskan</td>',r+='<td class="displayNone"></td>',$("#boolAdd").val("0")):"Add"==t[d].signa.substring(0,3)&&"0"==$("#boolAdd").val()?(console.log(t[d].merek_id+" = 3"),(l=[])[l.length]={id:d},r+="<tr>",r+='<td style="width:15px">R/</td>',r+='<td><a data-target=".bs-example-modal-lg" data-toggle="modal" value="'+t[d].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[d].merek_obat+"</a></td>",r+="<td> fls No : "+t[d].jumlah+"</td>",r+='<td class="displayNone">'+t[d].merek_id+"</td>",r+="</tr>",r+="<tr>",r+='<td  style="text-align:center;" colspan="3">ADD</td>',r+='<td class="displayNone"></td>',$("#boolAdd").val("1")):"Add"==t[d].signa.substring(0,3)&&"1"==$("#boolAdd").val()?((l=[])[l.length]={id:d},console.log(t[d].merek_id+" = 4"),r+="<tr>",r+='<td style="width:15px"></td>',r+='<td><a data-target=".bs-example-modal-lg" data-toggle="modal" value="'+t[d].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[d].merek_obat+"</a></td>",r+="<td> No : "+t[d].jumlah+"</td>",r+='<td class="displayNone">'+t[d].merek_id+"</td>","150802040"==t[d].formula_id&&"150803008"==id_formula_sirup_add||"150806007"==t[d].formula_id&&"150803003"==id_formula_sirup_add||"150803047"==t[d].formula_id&&"150803006"==id_formula_sirup_add||"150806005"==t[d].formula_id&&"150921001"==id_formula_sirup_add||(addSatu=!0)):"Puyer"==t[d].signa.substring(0,5)&&"0"==$("#puyer").val()?((l=[])[l.length]={id:d},console.log(t[d].merek_id+" = 5"),r+="<tr>",r+='<td style="width:15px">R/</td>',r+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[d].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[d].merek_obat+"</a></td>",r+="<td> No : "+t[d].jumlah+"</td>",r+='<td class="displayNone">'+t[d].merek_id+"</td>",$("#puyer").val("1")):"Puyer"==t[d].signa.substring(0,5)&&"1"==$("#puyer").val()?(console.log(t[d].merek_id+" = 6"),(l=[])[l.length]={id:d},r+="<tr>",r+='<td style="width:15px"></td>',r+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[d].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[d].merek_obat+"</a></td>",r+="<td> No : "+t[d].jumlah+"</td>",r+='<td class="displayNone">'+t[d].merek_id+"</td>"):(console.log(t[d].merek_id+" = 7"),(l=[])[l.length]={id:d},r+="<tr>",r+='<td style="width:15px">R/</td>',r+='<td style="text-align:left;" ><a data-target=".bs-example-modal-lg" data-toggle="modal" data-value="'+t[d].merek_id+'" onclick="informasi(this); return false; " href="#" nowrap>'+t[d].merek_obat+"</a></td>",r+="<td> No : "+t[d].jumlah+"</td>",r+='<td class="displayNone">'+t[d].merek_id+"</td>",r+="</tr><tr>",r+='<td style="width:15px"></td>',r+='<td style="border-bottom:1px solid #000;"> S '+t[d].signa+"</td>",r+='<td style="border-bottom:1px solid #000;" nowrap>'+t[d].aturan_minum+"</td>",r+='<td class="displayNone"></td>'),r+="</tr></tbody></table>"}else n="",r="",e="";return[e,n,r]}function informasi(a){var t=$(a).data("value");$.post(base+"/poli/ajax/ajxobat",{merek_id:t},(function(t){var e=(t=$.parseJSON(t)).komposisis,i="";if(e.length>0)for(var n=0;n<e.length;n++)i+="<tr>",i+="<td>"+e[n].komposisi+"</td>",i+="<td>"+e[n].pregnancy_safety_index+"</td>",i+="</tr>";else i+="<tr>",i+='<td colspan="2" class="text-center">Komposisi Tidak Terdaftar</td>',i+="</tr>";$("#nama_obat").text($(a).text()),$("#kontraindikasi").html(t.kontraindikasi),$("#indikasi").html(t.indikasi),$("#efek_samping").html(t.efek_samping),$("#tabel_komposisi").html(i)}))}$(".hide-panel").closest(".panel").find(".panel-heading").css("border","3px border red"),$(".hide-panel").closest(".panel").find(".panel-heading").css("cursor","pointer"),$(".hide-panel").closest(".panel").find(".panel-heading").click((function(a){""==$("#resepluar").val()&&($(this).closest(".panel").find(".hide-panel").slideToggle((function(){$(this).closest(".panel").find(".resepluar").focus()})),$('.unhide-panel:not([src="'+base+'/notfound.jpg"])').toggle())}));var riwayat=[];function inputRiwayatKehamilan(a){var t=riwayat_obs();if(""!=$("#inputSpontanSC").val()){var e=$("#inputJenisKelamin").val(),i=$("#inputBeratLahir").val(),n=$("#inputTahunLahir").val(),l=$("#inputLahirDi").val(),r=$("#inputSpontanSC").val();t[t.length]={jenis_kelamin:e,berat_lahir:i+" gr",tahun_lahir:n,lahir_di:l,spontan_sc:r},string_obs(t),view()}else validasi("#inputSpontanSC","Hapus Diisi!!")}function rowDel(a){riwayat=riwayat_obs();var t=$(a).closest("tr").find("td:first-child");t=parseInt(t)-1,riwayat.splice(t,1),string_obs(riwayat),view()}function viewNoFocus(){var a="";riwayat=riwayat_obs();for(var t=0;t<riwayat.length;t++){n=parseInt(t)+1;var e=parseInt(riwayat.length)-1;a+="<tr>",a+="<td>"+n+"</td>",a+="<td>"+riwayat[t].jenis_kelamin+"</td>",a+="<td>"+riwayat[t].berat_lahir+"</td>",a+="<td>"+riwayat[t].tahun_lahir+"</td>",a+="<td>"+riwayat[t].lahir_di+"</td>",a+="<td>"+riwayat[t].spontan_sc+"</td>",a+=t==e?'<td><button type="button" class="btn btn-danger btn-xs" onclick="rowDel(this);return false;">hapus</button></td>':"<td></td>",a+="</tr>"}a+="<tr>",a+="<td>"+(parseInt(riwayat.length)+1)+"</td>",a+="<td>ini<td>",a+="<td></td>",a+="<td></td>",a+="<td></td>",a+="<td></td>",a+="<td></td>",a+="</tr>",$(".inp").val(""),$("#table_riwayat_kehamilan").html(a);var i=JSON.stringify(riwayat);$("#riwayat_kehamilan").val(i)}function view(){viewNoFocus(),$("#inputJenisKelamin").focus()}function riwayat_obs(){return""==(riwayat=$("#riwayat_kehamilan").val())&&(riwayat="[]"),JSON.parse(riwayat)}function string_obs(a){a=JSON.stringify(a),$("#riwayat_kehamilan").val(a)}function uk(a,t){$("#"+t).datepicker({todayBtn:"linked",keyboardNavigation:!1,forceParse:!1,calendarWeeks:!0,autoclose:!0,format:"dd-mm-yyyy"}).on("changeDate",(function(e){uk_exec(a,t)})),$("#"+a).attr("readonly","readonly")}function uk_exec(a,t){if(""!=$("#"+t).val()){var e=$("#"+t).val();$.post(base+"/anc/uk",{hpht:e},(function(t){t=$.trim(t),$("#"+a).val(t)}))}else $("#"+a).val("")}$("#input_riwayat").keydown((function(a){if(9==(a.keyCode||a.which))return $("#input_riwayat").click(),!1}));
